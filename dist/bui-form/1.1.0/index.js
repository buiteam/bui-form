define("bui-form/1.1.0/index",["bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/form","bui-form/1.1.0/src/row","bui-form/1.1.0/src/fieldgroup","bui-form/1.1.0/src/hform","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/field","bui-overlay/1.1.0/index","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-form/1.1.0/src/group/base","bui-form/1.1.0/src/group/range","bui-form/1.1.0/src/group/check","bui-form/1.1.0/src/group/select"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=t.namespace("Form"),n=e("bui-form/1.1.0/src/tips");t.mix(o,{Tips:n,TipItem:n.Item,FieldContainer:e("bui-form/1.1.0/src/fieldcontainer"),Form:e("bui-form/1.1.0/src/form"),Row:e("bui-form/1.1.0/src/row"),Group:e("bui-form/1.1.0/src/fieldgroup"),HForm:e("bui-form/1.1.0/src/hform"),Rules:e("bui-form/1.1.0/src/rules"),Field:e("bui-form/1.1.0/src/field"),FieldGroup:e("bui-form/1.1.0/src/fieldgroup")}),i.exports=o}),define("bui-form/1.1.0/src/tips",["bui-common/1.1.0/common","bui-overlay/1.1.0/index"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=t.prefix,n=e("bui-overlay/1.1.0/index").Overlay,s="data-tip",l=o+"form-tip-container",a=n.extend({initializer:function(){var e=this,r=e.get("render");if(!r){var i=$(e.get("trigger")).parent();e.set("render",i)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,r=$(e.get("trigger"));r.val()?e.set("visible",!1):(e.set("align",{node:$(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,r=$(e.get("trigger"));e.get("el").on("click",function(){e.hide(),r.focus()}),r.on("click focus",function(){e.hide()}),r.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),u=function(e){return this.constructor!==u?new u(e):(u.superclass.constructor.call(this,e),void this._init())};u.ATTRS={form:{},items:{valueFn:function(){return[]}}},t.extend(u,t.Base),t.augment(u,{_init:function(){var e=this,r=$(e.get("form"));r.length&&(t.each($.makeArray(r[0].elements),function(r){var i=$(r).attr(s);i&&e._initFormElement(r,$.parseJSON(i))}),r.addClass(l))},_initFormElement:function(e,r){r&&(r.trigger=e);var i=this,t=i.get("items"),o=new a(r);t.push(o)},getItem:function(e){var r=this,i=r.get("items"),o=null;return t.each(i,function(r){return $(r.get("trigger")).attr("name")===e?(o=r,!1):void 0}),o},resetVisible:function(){var e=this,r=e.get("items");t.each(r,function(e){e.resetVisible()})},render:function(){var e=this,r=e.get("items");t.each(r,function(e){e.render()})},destroy:function(){var e=this,r=e.get(r);t.each(r,function(e){e.destroy()})}}),u.Item=a,i.exports=u}),define("bui-form/1.1.0/src/fieldcontainer",["bui-common/1.1.0/common","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){function t(e){return e.is(d)}function o(e,r){if(e!=r){if(t(e))return[e];var i=e.attr("class");if(i&&(-1!==i.indexOf(f)||-1!==i.indexOf(c)))return[e]}var s=[],l=e.children();return n.each(l,function(e){s=s.concat(o($(e),r))}),s}var n=e("bui-common/1.1.0/common"),s=e("bui-form/1.1.0/src/field"),l=e("bui-form/1.1.0/src/groupvalid"),a=n.prefix,u="form-field",c=a+u,f=a+"form-group",d="input,select,textarea",m=n.Component.View.extend([l.View]),b=n.Component.Controller.extend([l],{syncUI:function(){var e=this,r=e.getFields(),i=e.get("validators");n.each(r,function(e){var r=e.get("name");i[r]&&e.set("validator",i[r])}),n.each(i,function(r,i){if(0==i.indexOf("#")){var t=i.replace("#",""),o=e.getChild(t,!0);o&&o.set("validator",r)}})},getDecorateElments:function(){var e=this,r=e.get("el"),i=o(r,r);return i},findXClassByNode:function(e,r){return"checkbox"===e.attr("type")?u+"-checkbox":"radio"===e.attr("type")?u+"-radio":"number"===e.attr("type")?u+"-number":e.hasClass("calendar")?u+"-date":"SELECT"==e[0].tagName?u+"-select":t(e)?u:n.Component.Controller.prototype.findXClassByNode.call(this,e,r)},getRecord:function(){var e=this,r={},i=e.getFields();return n.each(i,function(i){var t=i.get("name"),o=e._getFieldValue(i);if(r[t]){if(n.isArray(r[t])&&null!=o)r[t].push(o);else if(null!=o){var s=[r[t]];s.push(o),r[t]=s}}else r[t]=o}),r},getFields:function(e){var r=this,i=[],t=r.get("children");return n.each(t,function(r){r instanceof s?e&&r.get("name")!=e||i.push(r):r.getFields&&(i=i.concat(r.getFields(e)))}),i},getField:function(e){var r=this,i=r.getFields(),t=null;return n.each(i,function(r){return r.get("name")===e?(t=r,!1):void 0}),t},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,r){var i=this,t=i.getFields(e);n.each(t,function(e){i._setFieldValue(e,r)})},_setFieldValue:function(e,r){if(!e.get("disabled"))if(e instanceof s.Check){var i=e.get("value");r&&(i===r||n.isArray(r)&&n.Array.contains(i,r))?e.set("checked",!0):e.set("checked",!1)}else null==r&&(r=""),e.clearErrors(!0),e.set("value",r)},getFieldValue:function(e){var r=this,i=r.getFields(e),t=[];return n.each(i,function(e){var i=r._getFieldValue(e);i&&t.push(i)}),0===t.length?null:1===t.length?t[0]:t},_getFieldValue:function(e){return e instanceof s.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var r=this,i=r.getFields();n.each(i,function(i){var t=i.get("name");r._setFieldValue(i,e[t])})},updateRecord:function(e){var r=this,i=r.getFields();n.each(i,function(i){var t=i.get("name");e.hasOwnProperty(t)&&r._setFieldValue(i,e[t])})},focus:function(){var e=this,r=e.getFields(),i=r[0];i&&i.focus()},_uiSetDisabled:function(e){var r=this,i=r.get("children");n.each(i,function(r){r.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:m}}},{xclass:"form-field-container"});b.View=m,i.exports=b}),define("bui-form/1.1.0/src/form",["bui-common/1.1.0/common","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o={NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"},n=e("bui-form/1.1.0/src/fieldcontainer"),s=(t.Component,n.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"})),l=n.extend({renderUI:function(){var e,r=this,i=r.get("buttonBar");$.isPlainObject(i)&&r.get("buttons")&&(e=t.merge(r.getDefaultButtonBarCfg(),i),r._initButtonBar(e)),r._initSubmitMask()},_initButtonBar:function(e){var r=this;t.use("bui/toolbar",function(i){buttonBar=new i.Bar(e),r.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,r=e.get("el");r.on("submit",function(r){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===o.AJAX&&(r.preventDefault(),e.ajaxSubmit())):(r.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,r=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:r,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,r=e.getFields();t.each(r,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(r){t.log(r)}return!1}})},submit:function(e){var r=this,i=r.get("submitType");if(r.valid(),r.isValid()){if(0==r.onBeforeSubmit())return;i===o.NORMAL?r.get("el")[0].submit():i===o.AJAX&&r.ajaxSubmit(e)}else r.focusError()},ajaxSubmit:function(e){var r,i=this,o=i.get("method"),n=i.get("action"),s=i.get("callback"),l=i.get("submitMask"),a=i.serializeToObject(),u=t.merge(!0,{url:n,type:o,dataType:"json",data:a},e);e&&e.success&&(r=e.success),u.success=function(e){l&&l.hide&&l.hide(),r&&r(e),s&&s.call(i,e)},l&&l.show&&l.show(),$.ajax(u)},_initSubmitMask:function(){var e=this,r=e.get("submitType"),i=e.get("submitMask");r===o.AJAX&&i&&t.use("bui/mask",function(r){var o=$.isPlainObject(i)?i:{};i=new r.LoadMask(t.mix({el:e.get("el")},o)),e.set("submitMask",i)})},serializeToObject:function(){return t.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,r=e.get("initRecord");e.setRecord(r)},resetTips:function(){var e=this,r=e.getFields();t.each(r,function(e){e.resetTip()})},destructor:function(){var e=this,r=e.get("buttonBar"),i=e.get("submitMask");r&&r.destroy&&r.destroy(),i&&i.destroy&&i.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"正在提交。。。"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:s},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});l.View=s,i.exports=l}),define("bui-form/1.1.0/src/row",["bui-common/1.1.0/common","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){var t=(e("bui-common/1.1.0/common"),e("bui-form/1.1.0/src/fieldcontainer")),o=t.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});i.exports=o}),define("bui-form/1.1.0/src/fieldgroup",["bui-common/1.1.0/common","bui-form/1.1.0/src/group/base","bui-form/1.1.0/src/group/range","bui-form/1.1.0/src/group/check","bui-form/1.1.0/src/group/select","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e){var r=e("bui-common/1.1.0/common"),i=e("bui-form/1.1.0/src/group/base");return r.mix(i,{Range:e("bui-form/1.1.0/src/group/range"),Check:e("bui-form/1.1.0/src/group/check"),Select:e("bui-form/1.1.0/src/group/select")}),i}),define("bui-form/1.1.0/src/hform",["bui-common/1.1.0/common","bui-form/1.1.0/src/form","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){var t=(e("bui-common/1.1.0/common"),e("bui-form/1.1.0/src/form")),o=t.extend({getDefaultButtonBarCfg:function(){var e=this,r=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:r,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});i.exports=o}),define("bui-form/1.1.0/src/rules",["bui-form/1.1.0/src/rule","bui-common/1.1.0/common"],function(e,r,i){function t(e){return parseFloat(e)}function o(e){return BUI.Date.parse(e)}function n(e,r,i){var t=e&&e.equals!==!1;return t?r>=i:r>i}function s(e){return""==e||null==e}function l(e,r,i,t){for(var o=t.getFields(),l=!0,a=1;a<o.length;a++){var u,c,f=o[a],d=o[a-1];if(f&&d&&(u=f.get("value"),c=d.get("value"),!s(u)&&!s(c)&&!n(r,u,c))){l=!1;break}}return l?null:i}function a(e){var r=e.getFieldAt(0);return r?r.get("name"):""}function u(e,r){if(BUI.isArray(r)||(r=[r]),!e||!r.length)return!1;var i=e?BUI.isArray(e)?e.length:1:0;if(1==r.length){var t=r[0];if(!t)return!0;if(t>i)return!1}else{var o=r[0],n=r[1];if(o>i||i>n)return!1}return!0}{var c=e("bui-form/1.1.0/src/rule"),f={},d={add:function(e){var r;return $.isPlainObject(e)?(r=e.name,f[r]=new c(e)):e.get&&(r=e.get("name"),f[r]=e),f[r]},remove:function(e){delete f[e]},get:function(e){return f[e]},valid:function(e,r,i,t,o){var n=d.get(e);return n?n.valid(r,i,t,o):null},isValid:function(e,r,i,t){return null==d.valid(e,r,i,t)}};d.add({name:"required",msg:"不能为空！",validator:function(e,r,i){return r!==!1&&/^\s*$/.test(e)?i:void 0}}),d.add({name:"equalTo",msg:"两次输入不一致！",validator:function(e,r,i){var t=$(r);return t.length&&(r=t.val()),e===r?void 0:i}}),d.add({name:"min",msg:"输入值不能小于{0}！",validator:function(e,r,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&t(e)<t(r)?i:void 0}}),d.add({name:"max",msg:"输入值不能大于{0}！",validator:function(e,r,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&t(e)>t(r)?i:void 0}}),d.add({name:"length",msg:"输入值长度为{0}！",validator:function(e,r,i){return null!=e&&(e=$.trim(e.toString()),r!=e.length)?i:void 0}}),d.add({name:"minlength",msg:"输入值长度不小于{0}！",validator:function(e,r,i){if(null!=e){e=$.trim(e.toString());var t=e.length;if(r>t)return i}}}),d.add({name:"maxlength",msg:"输入值长度不大于{0}！",validator:function(e,r,i){if(e){e=$.trim(e.toString());var t=e.length;if(t>r)return i}}}),d.add({name:"regexp",msg:"输入值不符合{0}！",validator:function(e,r,i){return r?r.test(e)?void 0:i:void 0}}),d.add({name:"email",msg:"不是有效的邮箱地址！",validator:function(e,r,i){return e=$.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:i:void 0}}),d.add({name:"date",msg:"不是有效的日期！",validator:function(e,r,i){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=$.trim(e),e?BUI.Date.isDateString(e)?void 0:i:void 0)}}),d.add({name:"minDate",msg:"输入日期不能小于{0}！",validator:function(e,r,i){if(e){var t=o(e);if(t&&t<o(r))return i}}}),d.add({name:"maxDate",msg:"输入日期不能大于{0}！",validator:function(e,r,i){if(e){var t=o(e);if(t&&t>o(r))return i}}}),d.add({name:"mobile",msg:"不是有效的手机号码！",validator:function(e,r,i){return e=$.trim(e),e?/^\d{11}$/.test(e)?void 0:i:void 0}}),d.add({name:"number",msg:"不是有效的数字！",validator:function(e,r,i){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?i:void 0)}}),d.add({name:"dateRange",msg:"结束日期不能小于起始日期！",validator:l}),d.add({name:"numberRange",msg:"结束数字不能小于开始数字！",validator:l}),d.add({name:"checkRange",msg:"必须选中{0}项！",validator:function(e,r,i,t){var o,n=a(t),s=r;return n&&s&&(o=e[n],!u(o,s))?i:null}})}i.exports=d}),define("bui-form/1.1.0/src/field",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=e("bui-form/1.1.0/src/field/base");t.mix(o,{Text:e("bui-form/1.1.0/src/field/text"),Date:e("bui-form/1.1.0/src/field/date"),Select:e("bui-form/1.1.0/src/field/select"),Hidden:e("bui-form/1.1.0/src/field/hidden"),Number:e("bui-form/1.1.0/src/field/number"),Check:e("bui-form/1.1.0/src/field/check"),Radio:e("bui-form/1.1.0/src/field/radio"),Checkbox:e("bui-form/1.1.0/src/field/checkbox"),Plain:e("bui-form/1.1.0/src/field/plain"),List:e("bui-form/1.1.0/src/field/list"),TextArea:e("bui-form/1.1.0/src/field/textarea"),Uploader:e("bui-form/1.1.0/src/field/uploader"),CheckList:e("bui-form/1.1.0/src/field/checklist"),RadioList:e("bui-form/1.1.0/src/field/radiolist")}),i.exports=o}),define("bui-form/1.1.0/src/groupvalid",["bui-form/1.1.0/src/valid","bui-common/1.1.0/common","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){function t(){}function o(){}var n="x-form-error",s=e("bui-form/1.1.0/src/valid");BUI.augment(t,s.View,{showError:function(e,r,i){var t=BUI.substitute(r,{error:e}),o=$(t);o.appendTo(i),o.addClass(n)},clearErrors:function(){var e=this,r=e.getErrorsContainer();r.children("."+n).remove()}}),o.ATTRS=ATTRS=BUI.merge(!0,s.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(o,s,{__bindUI:function(){var e=this,r="validchange change";e.on(r,function(r){var i=r.target;if(i!=this&&e.get("showError")){var t=i.isValid();e._hasAllChildrenValid()&&(t=t&&e.isChildrenValid(),t&&(e.validControl(e.getRecord()),t=e.isSelfValid())),t?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,r=e.isChildrenValid();return r&&e.isSelfValid()},valid:function(){var e=this,r=e.get("children");e.get("disabled")||BUI.each(r,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,r=e.get("children"),i=!0;return BUI.each(r,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(i=!1,!1)}),i},isChildrenValid:function(){var e=this,r=e.get("children"),i=!0;return BUI.each(r,function(e){return e.get("disabled")||e.isValid()?void 0:(i=!1,!1)}),i},isSelfValid:function(){return!this.get("error")},validControl:function(e){var r=this,i=r.getValidError(e);r.set("error",i)},getErrors:function(){var e=this,r=e.get("children"),i=e.get("showChildError"),t=null,o=[];return i&&BUI.each(r,function(e){e.getErrors&&(o=o.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(t=e.get("error"),t&&o.push(t)),o},_uiSetErrorTpl:function(e){var r=this,i=r.get("children");BUI.each(i,function(r){r.get("userConfig").errorTpl||r.set("errorTpl",e)})}}),o.View=t,i.exports=o}),define("bui-form/1.1.0/src/field/base",["bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=t.Component,n=e("bui-form/1.1.0/src/tips").Item,s=e("bui-form/1.1.0/src/valid"),l=e("bui-form/1.1.0/src/remote"),a=t.prefix+"form-field-error",u="bui-form-tip-container",c=o.View.extend([l.View,s.View],{renderUI:function(){var e=this,r=e.get("control");if(r)e.set("controlContainer",r.parent());else{var i=e.get("controlTpl"),t=e.getControlContainer();if(i){var r=$(i).appendTo(t);e.set("control",r)}}},clearErrors:function(){var e=this,r=e.get("msgEl");r&&(r.remove(),e.set("msgEl",null)),e.get("el").removeClass(a)},showError:function(e,r){var i=this,o=i.get("control"),n=t.substitute(r,{error:e}),s=$(n);s.appendTo(o.parent()),i.set("msgEl",s),i.get("el").addClass(a)},getControlContainer:function(){var e=this,r=e.get("el"),i=e.get("controlContainer");return i&&t.isString(i)&&(i=r.find(i)),i&&i.length?i:r},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var r=this;r.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=o.Controller.extend([l,s],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var r=e.get("tip");if(r){var i=e.getTipTigger();i&&i.parent().addClass(u),r.trigger=i,r.autoRender=!0,r=new n(r),e.set("tip",r)}})},bindUI:function(){var e=this,r=e.get("validEvent"),i=e.get("changeEvent"),t=e.get("firstValidEvent"),o=e.getInnerControl();o.is("select")&&(r="change"),o.on(r,function(){var r=e.getControlValue(o);e.validControl(r)}),t&&o.on(t,function(){if(!e.get("hasValid")){var r=e.getControlValue(o);e.validControl(r)}}),e.on(i,function(){e.onValid()}),e.on("remotecomplete",function(r){e._setError(r.error)})},onValid:function(){var e=this,r=e.getControlValue();r=e.parseValue(r),e.isCurrentValue(r)||(e.setInternal("value",r),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var r=this;return e=e||r.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,r={};return r[e.get("name")]=e.getControlValue(),r},setControlValue:function(e){var r=this,i=r.getInnerControl();i.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var r,i=this;return e=e||i.getControlValue(),preError=i.get("error"),r=i.getValidError(e),i.setInternal("hasValid",!0),r?(i._setError(r),i.fire("error",{msg:r,value:e}),preError!==r&&i.fire("validchange",{valid:!1})):(i._clearError(),i.fire("valid"),preError&&i.fire("validchange",{valid:!0})),!r},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var r=this;r._clearError(),e&&r.getControlValue()!=r.get("value")&&r.setControlValue(r.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,r=e.get("tip");r&&r.destroy&&r.destroy()},setInnerWidth:function(e){var r=this,i=r.getInnerControl(),o=i.siblings(),n=i.outerWidth()-i.width();t.each(o,function(e){n+=$(e).outerWidth()}),i.width(e-n)},_resetTip:function(){var e=this,r=e.get("tip");r&&r.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var r=this;r.setControlValue(e),r.get("rendered")&&(r.validControl(),r.onChange()),r._resetTip()},_uiSetDisabled:function(e){var r=this,i=r.getInnerControl(),o=r.get("children");i.attr("disabled",e),r.get("rendered")&&(e&&r.clearErrors(),e||r.valid()),t.each(o,function(r){r.set("disabled",e)})},_uiSetWidth:function(e){var r=this;null!=e&&r.get("forceFit")&&r.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:c}},PARSER:{control:function(e){var r=e.find("input,select,textarea");return r.length?r:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var r=this,i="select,input,textarea",t=r.get("value");return t||(e.is(i)?(t=e.val(),!t&&e.is("select")&&(t=e.attr("value"))):t=e.find(i).val()),t},name:function(e){var r=this,i="select,input,textarea",t=r.get("name");return t||(t=e.is(i)?e.attr("name"):e.find(i).attr("name")),t}}},{xclass:"form-field"});f.View=c,i.exports=f}),define("bui-form/1.1.0/src/field/text",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.extend({},{xclass:"form-field-text"});i.exports=o}),define("bui-form/1.1.0/src/field/date",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=e("bui-form/1.1.0/src/field/base"),n=t.Date,s=o.extend({renderUI:function(){var e=this,r=e.get("datePicker");$.isPlainObject(r)&&e.initDatePicker(r),(r.get&&r.get("showTime")||r.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(e){var r=this;t.use("bui/calendar",function(i){e.trigger=r.getInnerControl(),e.autoRender=!0,e=new i.DatePicker(e),r.set("datePicker",e),r.set("isCreatePicker",!0),r.get("children").push(e)})},setControlValue:function(e){var r=this,i=r.getInnerControl();t.isDate(e)&&(e=n.format(e,r._getFormatMask())),i.val(e)},_getFormatMask:function(){var e=this,r=e.get("datePicker");return r.showTime||r.get&&r.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return t.isNumber(e)?new Date(e):n.parse(e)},isCurrentValue:function(e){return n.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var r=this,i=r.get("datePicker");i&&(i.set?i.set("maxDate",e):i.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var r=this,i=r.get("datePicker");i&&(i.set?i.set("minDate",e):i.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return t.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var r=this,i=r.get("datePicker")||{};return e.hasClass("calendar-time")&&t.mix(i,{showTime:!0}),i}}},{xclass:"form-field-date"});i.exports=s}),define("bui-form/1.1.0/src/field/select",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){function t(e,r,i){e.children().remove();var t=i.get("emptyText");t&&i.get("showBlank")&&o("",t,e),n.each(r,function(r){o(r.value,r.text,e)})}function o(e,r,i){var t=new Option(r,e),o=i[0].options;o[o.length]=t}var n=e("bui-common/1.1.0/common"),s=e("bui-form/1.1.0/src/field/base"),l=s.extend({renderUI:function(){var e=this,r=e.getInnerControl(),i=e.get("select");e.get("srcNode")&&r.is("select")||$.isPlainObject(i)&&e._initSelect(i)},_initSelect:function(e){{var r=this;r.get("items")}n.use("bui/select",function(i){e.render=r.getControlContainer(),e.valueField=r.getInnerControl(),e.autoRender=!0,e=new i.Select(e),r.set("select",e),r.set("isCreate",!0),r.get("children").push(e),e.on("change",function(){var i=e.getSelectedValue();r.set("value",i)})})},setItems:function(e){var r=this,i=r.get("select");if($.isPlainObject(e)){var o=[];n.each(e,function(e,r){o.push({value:r,text:e})}),e=o}var s=r.getInnerControl();s.is("select")&&(t(s,e,r),r.setControlValue(r.get("value")),r.getControlValue()||r.setInternal("value","")),i&&(i.set?i.set("items",e):i.items=e)},setControlValue:function(e){var r=this,i=r.get("select"),t=r.getInnerControl();t.val(e),i&&i.set&&i.getSelectedValue()!==e&&i.setSelectedValue(e)},getSelectedText:function(){var e=this,r=e.get("select"),i=e.getInnerControl();if(i.is("select")){var t=i[0],o=t.options[t.selectedIndex];return o?o.text:""}return r.getSelectedText()},getTipTigger:function(){var e=this,r=e.get("select");return r&&r.rendered?r.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var r=this,i=r.getInnerControl(),t=r.get("select"),o=i.outerWidth()-i.width();i.width(e-o),t&&t.set&&t.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"请选择"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var r=e.find("option"),i=this.get("emptyText");return r.length&&(i=$(r[0]).text()),i}}},{xclass:"form-field-select"});i.exports=l}),define("bui-form/1.1.0/src/field/hidden",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});
i.exports=o}),define("bui-form/1.1.0/src/field/number",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var r=this,i=r.get("allowDecimals");return e=e.replace(/\,/g,""),i?parseFloat(parseFloat(e).toFixed(r.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});i.exports=o}),define("bui-form/1.1.0/src/field/check",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.extend({onValid:function(){var e=this,r=e._getControlChecked();e.setInternal("checked",r),e.fire("change"),e.fire(r?"checked":"unchecked")},_setControlChecked:function(e){var r=this,i=r.getInnerControl();i.attr("checked",!!e)},_getControlChecked:function(){var e=this,r=e.getInnerControl();return!!r.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var r=this;r._setControlChecked(e),r.get("rendered")&&r.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});i.exports=o}),define("bui-form/1.1.0/src/field/radio",[],function(e,r,i){var t=required("/check"),o=t.extend({bindUI:function(){var e=this,r=e.get("parent"),i=e.get("name");r&&e.getInnerControl().on("click",function(){var t=r.getFields(i);BUI.each(t,function(r){r!=e&&r.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});i.exports=o}),define("bui-form/1.1.0/src/field/checkbox",[],function(e,r,i){var t=required("./check"),o=t.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});i.exports=o}),define("bui-form/1.1.0/src/field/plain",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.View.extend({_uiSetValue:function(e){var r,i=this,t=i.get("textEl"),o=i.getControlContainer(),n=i.get("renderer"),s=n?n(e):e,l=i.get("width"),a=0;t&&t.remove(),s=s||"&nbsp;",r=BUI.substitute(i.get("textTpl"),{text:s}),t=$(r).appendTo(o),a=t.outerWidth()-t.width(),t.width(l-a),i.set("textEl",t)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),n=t.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:o}}},{xclass:"form-field-plain"});i.exports=n}),define("bui-form/1.1.0/src/field/list",["bui-common/1.1.0/common","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){function t(e){var r=e;return $.isPlainObject(e)&&(r=[],o.each(e,function(e,i){r.push({text:e,value:i})})),r}var o=e("bui-common/1.1.0/common"),n=e("bui-list/1.1.0/index"),s=e("bui-form/1.1.0/src/field/base"),n=s.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,r=e.get("children");return r[0]},bindUI:function(){var e=this,r=e._getList();r&&r.on("selectedchange",function(){var i=e._getListValue(r);e.set("value",i)})},_getListValue:function(e){var r=this;return e=e||r._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var r=this,i=r.getInnerControl(),t=r._getList();i.val(e),r._getListValue(t)!==e&&t.getCount()&&(t.get("multipleSelect")&&t.clearSelection(),t.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,r=e.get("defaultListCfg"),i=e.get("children"),t=e.get("list")||{};i[0]||($.isPlainObject(t)&&o.mix(t,r),i.push(t))},setItems:function(e){var r=this,i=r.get("value"),o=r._getList();o.set("items",t(e)),o.setSelectionByField(i.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if($.isPlainObject(e)){var r=[];o.each(e,function(e,i){r.push({value:i,text:e})}),e=r}return e}},list:{}},PARSER:{list:function(e){var r=e.find(".bui-simple-list");return r.length?{srcNode:r}:void 0}}},{xclass:"form-field-list"});i.exports=n}),define("bui-form/1.1.0/src/field/textarea",["bui-form/1.1.0/src/field/base","bui-common/1.1.0/common","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-form/1.1.0/src/field/base"),o=t.extend({_uiSetRows:function(e){var r=this,i=r.getInnerControl();e&&i.attr("rows",e)},_uiSetCols:function(e){var r=this,i=r.getInnerControl();e&&i.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});i.exports=o}),define("bui-form/1.1.0/src/field/uploader",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=t.JSON,n=e("bui-form/1.1.0/src/field/base"),s=e("bui-form/1.1.0/src/rules"),l=n.extend({renderUI:function(){var e=this,r=e.getInnerControl();e.get("srcNode")&&"file"===r.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var e=this,r=(e.get("children"),e.get("uploader")||{});t.use("bui/uploader",function(i){r.render=e.getControlContainer(),r.autoRender=!0,r=new i.Uploader(r),e.set("uploader",r),e.set("isCreate",!0),e.get("children").push(r),e._initQueue(r.get("queue")),r.on("success",function(){var r=e._getUploaderResult();e.setControlValue(r)}),r.get("queue").on("itemremoved",function(){var r=e._getUploaderResult();e.setControlValue(r)})})},_getUploaderResult:function(){var e=this,r=e.get("uploader"),i=r.get("queue"),o=i.getItems(),n=[];return t.each(o,function(e){e.result&&n.push(e.result)}),n},setControlValue:function(e){var r=this,i=r.getInnerControl();i.val(o.stringify(e))},_initControlValue:function(){var e,r=this,i=r.getControlValue();i&&(e=t.JSON.parse(i),r.set("value",e))},_initQueue:function(e){var r=this,i=r.get("value"),o=[];t.each(i,function(e){var r=t.cloneObject(e);r.success=!0,r.result=e,o.push(r)}),e&&e.setItems(o)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var r=this.get("disabled");return e&&e.isController&&e.set("disabled",r),e}},disabled:{setter:function(e){var r=this,i=r.get("uploader");i&&i.isController&&i.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});s.add({name:"uploader",msg:"上传文件选择有误！",validator:function(e,r,i,t){var o=t.get("uploader");return o&&!o.isValid()?i:void 0}}),i.exports=l}),define("bui-form/1.1.0/src/field/checklist",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/list","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){"use strict";var t=(e("bui-common/1.1.0/common"),e("bui-form/1.1.0/src/field/list")),o=t.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});i.exports=o}),define("bui-form/1.1.0/src/field/radiolist",["bui-common/1.1.0/common","bui-form/1.1.0/src/field/list","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){"use strict";var t=(e("bui-common/1.1.0/common"),e("bui-form/1.1.0/src/field/list")),o=t.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});i.exports=o}),define("bui-form/1.1.0/src/valid",["bui-common/1.1.0/common","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=e("bui-form/1.1.0/src/rules"),n=function(){};n.prototype={getErrorsContainer:function(){var e=this,r=e.get("errorContainer");return r?t.isString(r)?e.get("el").find(r):r:e.getContentElement()},showErrors:function(e){var r=this,i=r.getErrorsContainer(),o=r.get("errorTpl");return r.clearErrors(),r.get("showError")?r.get("showOneError")?void(e&&e.length&&r.showError(e[0],o,i)):void t.each(e,function(e){e&&r.showError(e,o,i)}):void 0},showError:function(){},clearErrors:function(){}};var s=function(){};s.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},s.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(r){var i=r.newVal;i?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,r){if(!e)return null;if(this.get("pauseValid"))return null;var i=this,t=i._getValidMessages(),n=null;for(var s in e)if(e.hasOwnProperty(s)){var l=e[s];if(n=o.valid(s,r,l,t[s],i))break}return n},_getValidMessages:function(){var e=this,r=e.get("defaultMessages"),i=e.get("messages");return t.merge(r,i)},getValidError:function(e){var r=this,i=r.get("validator"),t=null;return t=r.validRules(r.get("defaultRules"),e)||r.validRules(r.get("rules"),e),t||this.get("pauseValid")||(r.parseValue&&(e=r.parseValue(e)),t=i?i.call(this,e):""),t},getErrors:function(){},showErrors:function(e){var r=this,e=e||r.getErrors();r.get("view").showErrors(e)},clearErrors:function(e,r){r=null==r?!0:r;var i=this,o=i.get("children");r&&t.each(o,function(i){i.clearErrors&&(i.field?i.clearErrors(e):i.clearErrors(e,r))}),i.set("error",null),i.get("view").clearErrors()},addRule:function(e,r,i){var t=this,o=t.get("rules"),n=t.get("messages");o[e]=r,i&&(n[e]=i)},addRules:function(e,r){var i=this;t.each(e,function(e,t){var o=r?r[t]:null;i.addRule(t,e,o)})},removeRule:function(e){var r=this,i=r.get("rules");delete i[e]},clearRules:function(){var e=this;e.set("rules",{})}},s.View=n,i.exports=s}),define("bui-form/1.1.0/src/remote",["bui-common/1.1.0/common"],function(e,r,i){var t=e("bui-common/1.1.0/common"),o=function(){};o.ATTRS={isLoading:{},loadingEl:{}},o.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,r=e.get("loadingEl"),i=e.get("loadingTpl");i&&!r&&(r=$(i).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",r))},_clearLoading:function(){var e=this,r=e.get("loadingEl");r&&(r.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var r=this;e?r._setLoading():r._clearLoading()}};var n=function(){};n.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return t.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},n.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var r=e.getControlValue(),i=e.getRemoteParams();e._startRemote(i,r)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,r){function i(){t._remoteValid(e,o,r),t.set("isLoading",!0)}var t=this,o=t.get("remoteHandler"),n=t.get("cacheMap"),s=t.get("remoteDaly");return o&&t._cancelRemote(o),null!=n[r]?void t._validResult(t._getCallback(),n[r]):(o=setTimeout(i,s),void t.setInternal("remoteHandler",o))},_validResult:function(e,r){var i=this,t=e(r);i.onRemoteComplete(t,r)},onRemoteComplete:function(e,r,i){var t=this;i==t.get("remoteHandler")&&(t.fire("remotecomplete",{error:e,data:r}),t.set("isLoading",!1),t.setInternal("remoteHandler",null))},_getOptions:function(e){var r=this,i=r.get("remote"),o=r.get("defaultRemote"),n=t.merge(o,i,{data:e});return n},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,r,i){var t=this,o=t.get("cacheMap"),n=t._getOptions(e);n.success=function(e){var s=n.callback,l=s(e);o[i]=e,t.onRemoteComplete(l,e,r)},n.error=function(e,i,o){t.onRemoteComplete(o,null,r)},t.fire("remotestart",{data:e}),$.ajax(n)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var r=this;e=e||r.get("remoteHandler"),e&&(clearTimeout(e),r.setInternal("remoteHandler",null)),r.set("isLoading",!1)}},n.View=o,i.exports=n}),define("bui-form/1.1.0/src/rule",["bui-common/1.1.0/common"],function(e,r,i){function t(e,r,i,t,o){s.isArray(i)&&s.isString(i[1])&&(i[1]&&(t=i[1]),i=i[0]);var l=e,a=l.get("validator"),u=n(e,i,t);return r=null==r?"":r,a.call(l,r,i,u,o)}function o(e){if(null==e)return{};if($.isPlainObject(e))return e;var r=e,i={};if(s.isArray(e)){for(var t=0;t<r.length;t++)i[t]=r[t];return i}return{0:e}}function n(e,r,i){var t=o(r);return i=i||e.get("msg"),s.substitute(i,t)}var s=e("bui-common/1.1.0/common"),l=function(e){l.superclass.constructor.call(this,e)};s.extend(l,s.Base),l.ATTRS={name:{},msg:{},validator:{value:function(){}}},s.augment(l,{valid:function(e,r,i,o){var n=this;return t(n,e,r,i,o)}}),i.exports=l}),define("bui-form/1.1.0/src/group/base",["bui-common/1.1.0/common","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){var t=(e("bui-common/1.1.0/common"),e("bui-form/1.1.0/src/fieldcontainer")),o=t.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});i.exports=o}),define("bui-form/1.1.0/src/group/range",["bui-form/1.1.0/src/group/base","bui-common/1.1.0/common","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){function t(e,r,i){var t=e.get("allowEqual");return t?r>=i:r>i}var o=e("bui-form/1.1.0/src/group/base"),n=o.extend({},{ATTRS:{rangeText:{value:"开始不能大于结束！"},allowEqual:{value:!0},validator:{value:function(){for(var e=this,r=e.getFields(),i=!0,o=1;o<r.length;o++){var n,s,l=r[o],a=r[o-1];if(l&&a&&(n=l.get("value"),s=a.get("value"),!t(e,n,s))){i=!1;break}}return i?null:e.get("rangeText")}}}},{xclass:"form-group-range"});i.exports=n}),define("bui-form/1.1.0/src/group/check",["bui-form/1.1.0/src/group/base","bui-common/1.1.0/common","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,r,i){function t(e){var r=e.getFieldAt(0);return r?r.get("name"):""}var o=e("bui-form/1.1.0/src/group/base"),n=o.extend({bindUI:function(){var e=this;e.on("change",function(){var r=t(e),i=e.get("range"),o=e.getRecord(),n=o[r],s=i[1];n&&n.length>=s?e._setFieldsEnable(r,!1):e._setFieldsEnable(r,!0)})},_setFieldsEnable:function(e,r){var i=this,t=i.getFields(e);BUI.each(t,function(e){r?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});i.exports=n}),define("bui-form/1.1.0/src/group/select",["bui-form/1.1.0/src/group/base","bui-common/1.1.0/common","bui-data/1.1.0/index","bui-form/1.1.0/src/fieldcontainer","bui-form/1.1.0/src/field","bui-form/1.1.0/src/groupvalid","bui-form/1.1.0/src/field/base","bui-form/1.1.0/src/field/text","bui-form/1.1.0/src/field/date","bui-form/1.1.0/src/field/select","bui-form/1.1.0/src/field/hidden","bui-form/1.1.0/src/field/number","bui-form/1.1.0/src/field/check","bui-form/1.1.0/src/field/radio","bui-form/1.1.0/src/field/checkbox","bui-form/1.1.0/src/field/plain","bui-form/1.1.0/src/field/list","bui-form/1.1.0/src/field/textarea","bui-form/1.1.0/src/field/uploader","bui-form/1.1.0/src/field/checklist","bui-form/1.1.0/src/field/radiolist","bui-form/1.1.0/src/tips","bui-form/1.1.0/src/valid","bui-form/1.1.0/src/remote","bui-overlay/1.1.0/index","bui-form/1.1.0/src/rules","bui-form/1.1.0/src/rule","bui-list/1.1.0/index"],function(e,r,i){function t(e){var r=[];return BUI.each(e,function(e){r.push({text:e.text,value:e.id})}),r}var o=e("bui-form/1.1.0/src/group/base"),n=e("bui-data/1.1.0/index"),s=BUI.Component.UIBase.Bindable,l=o.extend([s],{initializer:function(){var e=this,r=e.get("url"),i=e.get("store")||e._getStore();i.isStore||(i.autoLoad=!0,r&&(i.url=r),i=new n.TreeStore(i)),e.set("store",i)},bindUI:function(){var e=this;e.on("change",function(r){var i=r.target;if(i!=e){var t=i,o=t.get("value"),n=e._getFieldIndex(t)+1;e._valueChange(o,n)}})},onLoad:function(e){var r=this,i=e?e.node:r.get("store").get("root");r._setFieldItems(i.level,i.children)},_getStore:function(){var e=this,r=e.get("type");return r&&a[r]?a[r]:{}},_valueChange:function(e,r){var i=this,t=i.get("store");if(e){var o=t.findNode(e);if(!o)return;t.isLoaded(o)?i._setFieldItems(r,o.children):t.loadNode(o)}else i._setFieldItems(r,[])},_setFieldItems:function(e,r){var i=this,o=i.getFieldAt(e),n=t(r);o&&(o.setItems(n),i._valueChange(o.get("value"),e+1))},_getFieldIndex:function(e){var r=this,i=r.getFields();return BUI.Array.indexOf(e,i)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),a={};l.addType=function(e,r){a[e]=r},l.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),i.exports=l});